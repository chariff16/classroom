<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link href="./output.css" rel="stylesheet" />
    <link rel="shortcut icon" href="img/logo.svg" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>

  <body>
    <nav class="bg-white border-gray-200 dark:bg-gray-900 fixed w-full">
      <div
        class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4"
      >
        <a
          href="index.html"
          class="flex items-center space-x-3 rtl:space-x-reverse"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            class="w-10 h-10 text-white p-2 bg-indigo-500 rounded-full"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
            ></path>
          </svg>
          <span
            class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white"
            >classRoom</span
          >
        </a>
        <button
          id="navBtn"
          type="button"
          class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
        >
          <span class="sr-only">Open main menu</span>
          <svg
            class="w-5 h-5"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 17 14"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M1 1h15M1 7h15M1 13h15"
            />
          </svg>
        </button>
        <div class="hidden w-full md:block md:w-auto" id="navBar">
          <ul
            class="font-medium flex items-center flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700"
          >
            <li>
              <a
                href="index.html"
                class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                aria-current="page"
                >Home</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                >About</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                >Services</a
              >
            </li>
            <li>
              <a
                href="singup.html"
                class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
                >Singup</a
              >
            </li>
            <li>
              <a
                href="login.html"
                class="text-white block bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
                >Login</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <section
      class="w-full h-screen flex justify-center items-center bg-gray-300"
    >
      <div class="w-[390px] rounded-xl bg-white">
        <h2
          class="text-center font-semibold text-2xl bg-blue-500 py-4 text-white"
        >
          Login
        </h2>
        <form class="py-4 px-6" id="form" method="post">
          <input type="hidden" name="action" value="login" />
          <div
            id="message"
            class="text-center bg-red-500 py-2 text-white hidden"
          ></div>
          <p class="py-3 text-lg">Username</p>
          <input
            type="text"
            name="username"
            placeholder="Username"
            id="userName"
            class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
          /><br />
          <p class="py-3 text-lg">Password</p>
          <input
            type="password"
            name="password"
            placeholder="Password"
            id="passWord"
            class="w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
          /><br />
          <input
            type="submit"
            value="Login"
            class="w-full mt-3 cursor-pointer text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg"
          />
          <p class="mt-3">
            if you don't have account
            <a href="singup.html" class="text-indigo-800 cursor-pointer"
              >Singup</a
            >
          </p>
        </form>
      </div>
    </section>

    <script>
      let navbar = document.querySelector("#navBar");
      let btn = document.querySelector("#navBtn");
      btn.addEventListener("click", function () {
        navbar.classList.toggle("hidden");
      });
      $(document).ready(function () {
        $("#form").submit(function (e) {
          e.preventDefault();
          let userName = $("#userName").val();
          let passWord = $("#passWord").val();
          $("#userName").removeClass("border-red-500");
          $("#passWord").removeClass("border-red-500");
          $("#message").addClass("hidden").html("");
          if (userName == "" || passWord == "") {
            if (userName == "" && passWord == "") {
              // removing the border color
              $("#userName").removeClass("border-gray-300");
              $("#passWord").removeClass("border-gray-300");
              // replacing the border color with red
              $("#userName").addClass("border-red-500");
              $("#passWord").addClass("border-red-500");
              $("#message").removeClass("hidden");
              $("#message").html("Enter Your Username And Password");
            }
            if (userName == "" && passWord != "") {
              $("#userName").removeClass("border-gray-300");
              $("#userName").addClass("border-red-500");
              $("#message").removeClass("hidden");
              $("#message").html("Enetr Your Username");
            }
            if (userName != "" && passWord == "") {
              $("#passWord").removeClass("border-gray-300");
              $("#passWord").addClass("border-red-500");
              $("#message").removeClass("hidden");
              $("#message").html("Enetr Your Password");
            }
          } else {
            var formData = $(this).serialize();
            $.ajax({
              type: "POST",
              url: "code.php",
              data: formData,
              success: function (response) {
                let res = jQuery.parseJSON(response);
                $("#message").addClass("hidden").html("");
                if (res.code == "200") {
                  if (res.data[0][5] == "admin") {
                    window.location.replace("admin/index.html");
                  } else if (res.data[0][5] == "student") {
                    window.location.replace("student/index.html");
                  } else if (res.data[0][5] == "student_refused") {
                    $("#message").removeClass("hidden");
                    $("#message").html("Your Accout Has been Refused");
                  } else if (res.data[0][5] == "student_tmp") {
                    $("#message").removeClass("hidden");
                    $("#message").html("Your Accout Has Not Been Accepted Yet");
                  }
                } else if (res.code == "404") {
                  $("#message").removeClass("hidden");
                  $("#message").html(res.message);
                }
              },
            });
          }
        });
      });
    </script>
  </body>
</html>
